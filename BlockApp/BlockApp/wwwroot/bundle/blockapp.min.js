function download(n,t){var i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t));i.setAttribute("download",n);i.style.display="none";document.body.appendChild(i);i.click();document.body.removeChild(i);toast("Downloaded!","alert-success")}function copy(n){n.select();document.execCommand("Copy");toast("Copied!","alert-success")}function toast(n,t){t||(t="alert-info");$("#alertBox").addClass("show");$("#alertText").text(n);$("#alertColor").addClass(t);setTimeout(function(){$("#alertBox").removeClass("show");$("#alertColor").removeClass()},3e3)}$(function(){var n=null,t=$("#tableForm"),i=t.find("button");i.click(function(){n=this});$("#tableForm").submit(function(){var r=Number($("input[name=page]").val()),i,t;return n.className.indexOf("button-left")!==-1&&r--,n.className.indexOf("button-right")!==-1&&r++,n.className.indexOf("per-page")!==-1&&$("input[name=itemPerPage]").val(Number(n.innerText)),n.className.indexOf("button-sort")!==-1&&(i="date",t=$("input[name=sortOrder]").val(),n.className.indexOf("amount-sort")!==-1&&(t!="amount"||t=="amount_desc"?i="amount":t=="amount"&&(i="amount_desc")),n.className.indexOf("date-sort")!==-1&&(t=="date"||t!="date_desc"?i="date_desc":t=="date_desc"&&(i="date")),$("input[name=sortOrder]").val(i)),$("input[name=page]").val(r),!0});$("#alertClose").click(function(){$("#alertBox").removeClass("show")});$(".btn-copy").click(function(){copy($(this.parentElement).prevAll("input").first())});$(".btn-download").click(function(){download("payment.txn",$(this.parentElement).prevAll("input").first().val())});$("input[name=trxBtnDeposit]").click(function(){var t=$("input[name='trxId']").val(),n=$("input[name='trxIdDepo']").val();/^(?=.{64}$)[a-zA-Z0-9]*/.test(n)?$.ajax({url:"/Manage/SendDepositTrxId",type:"POST",contentType:"application/json",data:JSON.stringify({TransactionId:t,TransactionHash:n}),success:function(){toast("Successfully saved!","alert-success")},error:function(){toast("Invalid transaction or user id!","alert-danger")}}):toast("Wrong format of transaction id!","alert-danger")});$("input[name=trxBtnWithdraw]").click(function(){var t=$("input[name='trxId']").val(),n=$("input[name='trxIdWith']").val();/^(?=.{64}$)[a-zA-Z0-9]*/.test(n)?$.ajax({url:"/Manage/SendWithdrawTrxId",type:"POST",contentType:"application/json",data:JSON.stringify({transactionId:t,transactionHash:n}),success:function(){toast("Successfully saved!","alert-success")},error:function(){toast("Invalid transaction or user id!","alert-danger")}}):toast("Wrong format of transaction id!","alert-danger")});$(".menu-image").click(function(){$(".sidenav").addClass("showside");$("body").addClass("overfrow")});$(".button-close").click(function(){$(".sidenav").removeClass("showside");$("body").removeClass("overfrow")});$(".sidenav-body").click(function(){$(".sidenav").removeClass("showside");$("body").removeClass("overfrow")});$(window).resize(function(){$(window).width()>=600&&($(".sidenav").removeClass("showside"),$("body").removeClass("overfrow"))});$("#btnBack").click(function(){history.back()})}(jQuery)),function(n){n("#btnGenerateMerchantSecret").on("click",function(){n.ajax({type:"POST",url:"/Manage/GenerateMerchantSecret",contentType:"application/json; charset=utf-8",dataType:"json",success:function(t){n("#MerchantSecret").val(t.merchantSecret)},error:function(n){console.log(n)}})});n("#btnSendEmail").on("click",function(){var t=n('input[name="__RequestVerificationToken"]').val();n.ajax({type:"POST",url:"/Manage/SendVerificationEmail",data:{__RequestVerificationToken:t},success:function(n){toast(n,"alert-success")},error:function(n){toast(n.responseText,"alert-danger")}})});n(".dropdown-menu li a").on("click",function(t){t.preventDefault();var r=n(this).text(),u=n(this).data("value"),i=n(this).parents(".dropdown").find(".btn");i.html(r+' <span class="caret"><\/span>');i.val(u);n(".dropdown-menu li").removeClass();n(this).parent("li").addClass("active")});n("#dropdown-wallet li a").on("click",function(t){t.preventDefault();n("#btnGenerateSubscribeAddress").prop("disabled",n("#wallet-type-value").val()==n(this).data("value"))});n("#btnGenerateSubscribeAddress").on("click",function(){var t=n("#choose-wallet").val();n.ajax({type:"POST",url:"/Manage/GenerateSubscribeAddress",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({walletType:t}),success:function(i){n("#Address").val(i.address);n("#Price").val(i.price);n("#btnGenerateSubscribeAddress").prop("disabled",!0);n("#wallet-type-value").val(t)},error:function(n){console.log(n)}})});n("#btn-save-personal").on("click",function(t){n(this.form).valid()&&(t.preventDefault(),n.ajax({type:"POST",url:"/Manage/SavePersonalInfo",contentType:"application/json; charset=utf-8",data:JSON.stringify({email:n("#Email").val(),firstName:n("#FirstName").val(),lastName:n("#LastName").val(),phoneNumber:n("#PhoneNumber").val()}),success:function(n){toast(n,"alert-success")},error:function(n){toast(n.responseText,"alert-danger")}}))});n("#btn-save-password").on("click",function(t){n(this.form).valid()&&(t.preventDefault(),n.ajax({type:"POST",url:"/Manage/ChangePassword",contentType:"application/json; charset=utf-8",data:JSON.stringify({oldPassword:n("#OldPassword").val(),newPassword:n("#NewPassword").val(),confirmPassword:n("#ConfirmPassword").val()}),success:function(n){toast(n,"alert-success")},error:function(n){toast(n.responseText,"alert-danger")}}))});n("#btn-save-merchant").on("click",function(t){n(this.form).valid()&&(t.preventDefault(),n.ajax({type:"POST",url:"/Manage/SaveMerchant",contentType:"application/json; charset=utf-8",data:JSON.stringify({merchantId:n("#MerchantId").val(),merchantSecret:n("#MerchantSecret").val(),redirectUri:n("#RedirectUri").val()||null,xPubKey:n("#XPubKey").val(),ethereumAddress:n("#EthereumAddress").val()}),success:function(n){toast(n,"alert-success")},error:function(n){toast(n.responseText,"alert-danger")}}))});n("#btn-check-status").on("click",function(){n.ajax({type:"POST",url:"/Manage/Subscriptions",contentType:"application/json; charset=utf-8",dataType:"json",data:n("#Price").val(),success:function(t){var i=n("#subscibe-status");t.status?(i.removeClass("text-danger"),i.addClass("text-success"),i.text("Active"),toast(t.statusMessage,"alert-success")):toast(t.statusMessage,"alert-danger")},error:function(n){toast(n,"alert-danger")}})})}(jQuery),function(n){n("#btnGenerateUnconfirmedScript").on("click",function(t){var i=n(this);n(this.form).valid()&&(t.preventDefault(),n.ajax({type:"POST",url:"/Purchaser/GenerateUnconfirmedScript",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({hash:n("#hash").val(),xPubKey:n("#XPubKey").val(),email:n("#Email").val()}),success:function(t){n("#UnconfirmedDepositTx").val(t.unconfirmedScript);toast("Data seved.","alert-success")},error:function(n){toast(n.responseText,"alert-danger")},beforeSend:function(){i.parent().find(".loader").css("display","inline-block")},complete:function(){i.parent().find(".loader").hide()}}))});n("#btnSendPartiallyDepositScript").on("click",function(){var t=n(this);n.ajax({type:"POST",url:"/Purchaser/SendPartiallyDepositScript",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({hash:n("#hash").val(),partiallySignedScript:n("#BuyerConfirmedDepositTx").val()}),success:function(n){console.log(n)},error:function(n){console.log(n)},beforeSend:function(){t.parent().find(".loader").css("display","inline-block")},complete:function(){t.parent().find(".loader").hide()}})});n("#btnSendPartiallyWithdrawScript").on("click",function(){var t=n(this);n.ajax({type:"POST",url:"/Purchaser/SendPartiallyWithdrawScript",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({hash:n("#hash").val(),partiallySignedScript:n("#BuyerConfirmedWithdrawTx").val()}),success:function(n){console.log(n)},error:function(n){console.log(n)},beforeSend:function(){t.parent().find(".loader").css("display","inline-block")},complete:function(){t.parent().find(".loader").hide()}})});n("#btnSaveDetail").on("click",function(t){var i=n(this);n(this.form).valid()&&(t.preventDefault(),n.ajax({type:"POST",url:"/Purchaser/SaveDataEthereum",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({hash:n("#hash").val(),email:n("#Email").val(),Address:n("#BuyerAddress").val()}),success:function(t){n("#FeeAddress").val(t.address);n("#FeeValue").val(t.fee);n("#Balance").val("0");n("#btnSaveDetail").prop("disabled",!0);toast("Data seved.","alert-success")},error:function(n){toast(n.responseText,"alert-danger")},beforeSend:function(){i.parent().find(".loader").css("display","inline-block")},complete:function(){i.parent().find(".loader").hide()}}))});n("#btnCheckBalance").on("click",function(){var t=n(this);n.ajax({type:"POST",url:"/Purchaser/Balance",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({hash:n("#hash").val()}),success:function(t){n("#Balance").val(t.balance);t.balance>0&&n("#btnDeploy").prop("disabled",!1)},error:function(n){console.log(n)},beforeSend:function(){t.parents(".form-btn-loader").find(".loader").css("display","inline-block")},complete:function(){t.parents(".form-btn-loader").find(".loader").hide()}})});n("#btnDeploy").on("click",function(){var t=n(this);n.ajax({type:"POST",url:"/Purchaser/DeployContract",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({hash:n("#hash").val()}),success:function(t){n("#ContractAddress").val(t.contractAddress);n("#ABI").val(t.abi);n("#btnDeploy").prop("disabled",!0)},error:function(n){console.log(n)},beforeSend:function(){t.parent().find(".loader").css("display","inline-block")},complete:function(){t.parent().find(".loader").hide()}})})}(jQuery);